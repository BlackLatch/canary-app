{"compilers":[{"contractTypes":["CanaryDossier"],"name":"solidity","settings":{"optimizer":{"enabled":true,"runs":200},"outputSelection":{"contracts/Dossier.sol":{"":["ast"],"*":["abi","bin-runtime","devdoc","userdoc","evm.bytecode.object","evm.bytecode.sourceMap","evm.deployedBytecode.object"]}}},"version":"0.8.24+commit.e11b9ed9"}],"contractTypes":{"CanaryDossier":{"abi":[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":true,"internalType":"uint256","name":"dossierId","type":"uint256"}],"name":"CheckInPerformed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":true,"internalType":"uint256","name":"dossierId","type":"uint256"},{"indexed":false,"internalType":"string","name":"name","type":"string"}],"name":"DossierCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":true,"internalType":"uint256","name":"dossierId","type":"uint256"}],"name":"DossierTriggered","type":"event"},{"inputs":[],"name":"GRACE_PERIOD","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MAX_CHECK_IN_INTERVAL","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MAX_DOSSIERS_PER_USER","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MAX_FILES_PER_DOSSIER","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MAX_RECIPIENTS_PER_DOSSIER","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MIN_CHECK_IN_INTERVAL","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_dossierId","type":"uint256"}],"name":"checkIn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"checkInAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_name","type":"string"},{"internalType":"uint256","name":"_checkInInterval","type":"uint256"},{"internalType":"address[]","name":"_recipients","type":"address[]"},{"internalType":"string[]","name":"_encryptedFileHashes","type":"string[]"}],"name":"createDossier","outputs":[{"internalType":"uint256","name":"dossierId","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_dossierId","type":"uint256"}],"name":"deactivateDossier","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"dossiers","outputs":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"string","name":"name","type":"string"},{"internalType":"bool","name":"isActive","type":"bool"},{"internalType":"uint256","name":"checkInInterval","type":"uint256"},{"internalType":"uint256","name":"lastCheckIn","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_user","type":"address"},{"internalType":"uint256","name":"_dossierId","type":"uint256"}],"name":"getDossier","outputs":[{"components":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"string","name":"name","type":"string"},{"internalType":"bool","name":"isActive","type":"bool"},{"internalType":"uint256","name":"checkInInterval","type":"uint256"},{"internalType":"uint256","name":"lastCheckIn","type":"uint256"},{"internalType":"string[]","name":"encryptedFileHashes","type":"string[]"},{"internalType":"address[]","name":"recipients","type":"address[]"}],"internalType":"struct CanaryDossier.Dossier","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_user","type":"address"}],"name":"getUserDossierIds","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_dossierId","type":"uint256"}],"name":"reactivateDossier","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_user","type":"address"},{"internalType":"uint256","name":"_dossierId","type":"uint256"}],"name":"shouldDossierStayEncrypted","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"userDossierCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"userDossierIds","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_user","type":"address"}],"name":"userExists","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"}],"contractName":"CanaryDossier","deploymentBytecode":{"bytecode":"0x608060405234801561000f575f80fd5b506116df8061001d5f395ff3fe608060405234801561000f575f80fd5b5060043610610111575f3560e01c8063a78b97071161009e578063c1a287e21161006e578063c1a287e214610154578063db06c5c114610234578063e545ed1f14610247578063e95a644f14610266578063f639247714610279575f80fd5b8063a78b9707146101bd578063a9e37f8f146101d0578063af6ce715146101f4578063bd16da8214610214575f80fd5b806364d34add116100e457806364d34add1461017d5780637c1b0f071461018557806387e2c112146101985780639820026e146101a0578063a11fee93146101b3575f80fd5b80630e666e4914610115578063161195c61461015457806336394dd21461016b5780634ab52be414610175575b5f80fd5b61013f61012336600461104d565b6001600160a01b03165f90815260016020526040902054151590565b60405190151581526020015b60405180910390f35b61015d610e1081565b60405190815260200161014b565b61017361028c565b005b61015d603281565b61015d606481565b61017361019336600461106d565b6103d4565b61015d601481565b6101736101ae36600461106d565b61045b565b61015d62278d0081565b61013f6101cb366004611084565b6104c3565b6101e36101de366004611084565b610773565b60405161014b9594939291906110ef565b61020761020236600461104d565b610835565b60405161014b9190611124565b610227610222366004611084565b61089e565b60405161014b91906111aa565b61015d610242366004611084565b610b4d565b61015d61025536600461104d565b60026020525f908152604090205481565b61017361027436600461106d565b610b78565b61015d6102873660046113d2565b610c5a565b335f908152600160209081526040808320805482518185028101850190935280835291929091908301828280156102e057602002820191905f5260205f20905b8154815260200190600101908083116102cc575b505050505090505f8151116103305760405162461bcd60e51b8152602060048201526011602482015270139bc8191bdcdcda595c9cc8199bdd5b99607a1b60448201526064015b60405180910390fd5b5f5b81518110156103d0575f82828151811061034e5761034e6114b7565b602090810291909101810151335f9081528083526040808220838352909352919091206002015490915060ff16156103c757335f8181526020818152604080832085845290915280822042600490910155518392917f2035d3cd8dbfc15af9377f059b052b6056f3915e48e88aa4ccb1524c41a8232c91a35b50600101610332565b5050565b335f818152602081815260408083208584529091529020548290811461040c5760405162461bcd60e51b8152600401610327906114cb565b335f81815260208181526040808320878452909152808220600201805460ff19169055518592917f0941bb85cb5be9df20776a463c826689120d8b7f9acbd0e09e946086391dd0b291a3505050565b335f81815260208181526040808320858452909152902054829081146104935760405162461bcd60e51b8152600401610327906114cb565b5050335f908152602081815260408083209383529290522060028101805460ff1916600117905542600490910155565b6001600160a01b0382165f908152602081815260408083208484529091528120548390839081146105065760405162461bcd60e51b8152600401610327906114cb565b6001600160a01b0385165f908152602081815260408083208784528252808320815160e0810190925280548252600181018054929391929184019161054a906114fb565b80601f0160208091040260200160405190810160405280929190818152602001828054610576906114fb565b80156105c15780601f10610598576101008083540402835291602001916105c1565b820191905f5260205f20905b8154815290600101906020018083116105a457829003601f168201915b50505050508152602001600282015f9054906101000a900460ff16151515158152602001600382015481526020016004820154815260200160058201805480602002602001604051908101604052809291908181526020015f905b828210156106c4578382905f5260205f20018054610639906114fb565b80601f0160208091040260200160405190810160405280929190818152602001828054610665906114fb565b80156106b05780601f10610687576101008083540402835291602001916106b0565b820191905f5260205f20905b81548152906001019060200180831161069357829003601f168201915b50505050508152602001906001019061061c565b5050505081526020016006820180548060200260200160405190810160405280929190818152602001828054801561072357602002820191905f5260205f20905b81546001600160a01b03168152600190910190602001808311610705575b50505050508152505090508060400151610740575f93505061076b565b5f8160800151426107519190611547565b9050610e1082606001516107659190611560565b10159350505b505092915050565b5f6020818152928152604080822090935290815220805460018201805491929161079c906114fb565b80601f01602080910402602001604051908101604052809291908181526020018280546107c8906114fb565b80156108135780601f106107ea57610100808354040283529160200191610813565b820191905f5260205f20905b8154815290600101906020018083116107f657829003601f168201915b5050505060028301546003840154600490940154929360ff9091169290915085565b6001600160a01b0381165f9081526001602090815260409182902080548351818402810184019094528084526060939283018282801561089257602002820191905f5260205f20905b81548152602001906001019080831161087e575b50505050509050919050565b6108dc6040518060e001604052805f8152602001606081526020015f151581526020015f81526020015f815260200160608152602001606081525090565b6001600160a01b0383165f9081526020818152604080832085845290915290205483908390811461091f5760405162461bcd60e51b8152600401610327906114cb565b6001600160a01b0385165f90815260208181526040808320878452825291829020825160e08101909352805483526001810180549192840191610961906114fb565b80601f016020809104026020016040519081016040528092919081815260200182805461098d906114fb565b80156109d85780601f106109af576101008083540402835291602001916109d8565b820191905f5260205f20905b8154815290600101906020018083116109bb57829003601f168201915b50505050508152602001600282015f9054906101000a900460ff16151515158152602001600382015481526020016004820154815260200160058201805480602002602001604051908101604052809291908181526020015f905b82821015610adb578382905f5260205f20018054610a50906114fb565b80601f0160208091040260200160405190810160405280929190818152602001828054610a7c906114fb565b8015610ac75780601f10610a9e57610100808354040283529160200191610ac7565b820191905f5260205f20905b815481529060010190602001808311610aaa57829003601f168201915b505050505081526020019060010190610a33565b50505050815260200160068201805480602002602001604051908101604052809291908181526020018280548015610b3a57602002820191905f5260205f20905b81546001600160a01b03168152600190910190602001808311610b1c575b5050505050815250509250505092915050565b6001602052815f5260405f208181548110610b66575f80fd5b905f5260205f20015f91509150505481565b335f8181526020818152604080832085845290915290205482908114610bb05760405162461bcd60e51b8152600401610327906114cb565b335f9081526020818152604080832086845290915290206002015460ff16610c0f5760405162461bcd60e51b8152602060048201526012602482015271446f7373696572206e6f742061637469766560701b6044820152606401610327565b335f8181526020818152604080832087845290915280822042600490910155518592917f2035d3cd8dbfc15af9377f059b052b6056f3915e48e88aa4ccb1524c41a8232c91a3505050565b5f610e108410158015610c70575062278d008411155b610cbc5760405162461bcd60e51b815260206004820152601960248201527f496e76616c696420636865636b2d696e20696e74657276616c000000000000006044820152606401610327565b335f90815260026020526040902054603211610d115760405162461bcd60e51b815260206004820152601460248201527313585e08191bdcdcda595c9cc81c995858da195960621b6044820152606401610327565b5f8351118015610d2357506014835111155b610d645760405162461bcd60e51b8152602060048201526012602482015271496e76616c696420726563697069656e747360701b6044820152606401610327565b5f8251118015610d7657506064825111155b610db25760405162461bcd60e51b815260206004820152600d60248201526c496e76616c69642066696c657360981b6044820152606401610327565b50335f81815260026020908152604080832054815160e0810183528181528084018a81526001828501819052606083018b905242608084015260a0830189905260c083018a9052968652858552838620838752909452919093208151815591519293909290820190610e2490826115bf565b50604082015160028201805460ff1916911515919091179055606082015160038201556080820151600482015560a08201518051610e6c916005840191602090910190610f15565b5060c08201518051610e88916006840191602090910190610f69565b5050335f81815260016020818152604080842080549384018155845281842090920186905592825260029092529081208054925090610ec68361167f565b919050555080336001600160a01b03167f7de8e13a19a56d242cff40035d4906d78d4c85c327766143a3198955ffce1d8a87604051610f059190611697565b60405180910390a3949350505050565b828054828255905f5260205f20908101928215610f59579160200282015b82811115610f595782518290610f4990826115bf565b5091602001919060010190610f33565b50610f65929150610fc8565b5090565b828054828255905f5260205f20908101928215610fbc579160200282015b82811115610fbc57825182546001600160a01b0319166001600160a01b03909116178255602090920191600190910190610f87565b50610f65929150610fe4565b80821115610f65575f610fdb8282610ff8565b50600101610fc8565b5b80821115610f65575f8155600101610fe5565b508054611004906114fb565b5f825580601f10611013575050565b601f0160209004905f5260205f209081019061102f9190610fe4565b50565b80356001600160a01b0381168114611048575f80fd5b919050565b5f6020828403121561105d575f80fd5b61106682611032565b9392505050565b5f6020828403121561107d575f80fd5b5035919050565b5f8060408385031215611095575f80fd5b61109e83611032565b946020939093013593505050565b5f81518084525f5b818110156110d0576020818501810151868301820152016110b4565b505f602082860101526020601f19601f83011685010191505092915050565b85815260a060208201525f61110760a08301876110ac565b941515604083015250606081019290925260809091015292915050565b602080825282518282018190525f9190848201906040850190845b8181101561115b5783518352928401929184019160010161113f565b50909695505050505050565b5f815180845260208085019450602084015f5b8381101561119f5781516001600160a01b03168752958201959082019060010161117a565b509495945050505050565b5f60208083528351818401528084015160e060408501526111cf6101008501826110ac565b905060408501511515606085015260608501516080850152608085015160a085015260a0850151601f19808684030160c08701528282518085528585019150858160051b86010186850194505f5b8281101561124957848783030184526112378287516110ac565b9588019593880193915060010161121d565b5060c08a01519650838982030160e08a01526112658188611167565b9a9950505050505050505050565b634e487b7160e01b5f52604160045260245ffd5b604051601f8201601f1916810167ffffffffffffffff811182821017156112b0576112b0611273565b604052919050565b5f82601f8301126112c7575f80fd5b813567ffffffffffffffff8111156112e1576112e1611273565b6112f4601f8201601f1916602001611287565b818152846020838601011115611308575f80fd5b816020850160208301375f918101602001919091529392505050565b5f67ffffffffffffffff82111561133d5761133d611273565b5060051b60200190565b5f82601f830112611356575f80fd5b8135602061136b61136683611324565b611287565b82815260059290921b84018101918181019086841115611389575f80fd5b8286015b848110156113c757803567ffffffffffffffff8111156113ab575f80fd5b6113b98986838b01016112b8565b84525091830191830161138d565b509695505050505050565b5f805f80608085870312156113e5575f80fd5b843567ffffffffffffffff808211156113fc575f80fd5b611408888389016112b8565b955060209150818701359450604087013581811115611425575f80fd5b8701601f81018913611435575f80fd5b803561144361136682611324565b81815260059190911b8201840190848101908b831115611461575f80fd5b928501925b828410156114865761147784611032565b82529285019290850190611466565b9650505050606087013591508082111561149e575f80fd5b506114ab87828801611347565b91505092959194509250565b634e487b7160e01b5f52603260045260245ffd5b602080825260169082015275111bdcdcda595c88191bd95cc81b9bdd08195e1a5cdd60521b604082015260600190565b600181811c9082168061150f57607f821691505b60208210810361152d57634e487b7160e01b5f52602260045260245ffd5b50919050565b634e487b7160e01b5f52601160045260245ffd5b8181038181111561155a5761155a611533565b92915050565b8082018082111561155a5761155a611533565b601f8211156115ba57805f5260205f20601f840160051c810160208510156115985750805b601f840160051c820191505b818110156115b7575f81556001016115a4565b50505b505050565b815167ffffffffffffffff8111156115d9576115d9611273565b6115ed816115e784546114fb565b84611573565b602080601f831160018114611620575f84156116095750858301515b5f19600386901b1c1916600185901b178555611677565b5f85815260208120601f198616915b8281101561164e5788860151825594840194600190910190840161162f565b508582101561166b57878501515f19600388901b60f8161c191681555b505060018460011b0185555b505050505050565b5f6001820161169057611690611533565b5060010190565b602081525f61106660208301846110ac56fea2646970667358221220b468d4da9701a6d679678a96e631a8ae5afdd44789e0d5390f6dbb718a638dbe64736f6c63430008180033"},"devdoc":{"details":"Simple dossier-based truth protection platform","kind":"dev","methods":{"checkIn(uint256)":{"details":"Check-in for a specific dossier"},"checkInAll()":{"details":"Check-in for all active dossiers"},"createDossier(string,uint256,address[],string[])":{"details":"Create a new dossier"},"deactivateDossier(uint256)":{"details":"Deactivate a dossier (releases data)"},"getDossier(address,uint256)":{"details":"Get dossier details"},"getUserDossierIds(address)":{"details":"Get user's dossier IDs"},"reactivateDossier(uint256)":{"details":"Reactivate a dossier"},"shouldDossierStayEncrypted(address,uint256)":{"details":"Check if dossier should stay encrypted (for TACo integration)"},"userExists(address)":{"details":"Check if user has any dossiers"}},"title":"CanaryDossier","version":1},"methodIdentifiers":{"GRACE_PERIOD()":"0xc1a287e2","MAX_CHECK_IN_INTERVAL()":"0xa11fee93","MAX_DOSSIERS_PER_USER()":"0x4ab52be4","MAX_FILES_PER_DOSSIER()":"0x64d34add","MAX_RECIPIENTS_PER_DOSSIER()":"0x87e2c112","MIN_CHECK_IN_INTERVAL()":"0x161195c6","checkIn(uint256)":"0xe95a644f","checkInAll()":"0x36394dd2","createDossier(string,uint256,address[],string[])":"0xf6392477","deactivateDossier(uint256)":"0x7c1b0f07","dossiers(address,uint256)":"0xa9e37f8f","getDossier(address,uint256)":"0xbd16da82","getUserDossierIds(address)":"0xaf6ce715","reactivateDossier(uint256)":"0x9820026e","shouldDossierStayEncrypted(address,uint256)":"0xa78b9707","userDossierCount(address)":"0xe545ed1f","userDossierIds(address,uint256)":"0xdb06c5c1","userExists(address)":"0x0e666e49"},"runtimeBytecode":{"bytecode":"0x608060405234801561000f575f80fd5b5060043610610111575f3560e01c8063a78b97071161009e578063c1a287e21161006e578063c1a287e214610154578063db06c5c114610234578063e545ed1f14610247578063e95a644f14610266578063f639247714610279575f80fd5b8063a78b9707146101bd578063a9e37f8f146101d0578063af6ce715146101f4578063bd16da8214610214575f80fd5b806364d34add116100e457806364d34add1461017d5780637c1b0f071461018557806387e2c112146101985780639820026e146101a0578063a11fee93146101b3575f80fd5b80630e666e4914610115578063161195c61461015457806336394dd21461016b5780634ab52be414610175575b5f80fd5b61013f61012336600461104d565b6001600160a01b03165f90815260016020526040902054151590565b60405190151581526020015b60405180910390f35b61015d610e1081565b60405190815260200161014b565b61017361028c565b005b61015d603281565b61015d606481565b61017361019336600461106d565b6103d4565b61015d601481565b6101736101ae36600461106d565b61045b565b61015d62278d0081565b61013f6101cb366004611084565b6104c3565b6101e36101de366004611084565b610773565b60405161014b9594939291906110ef565b61020761020236600461104d565b610835565b60405161014b9190611124565b610227610222366004611084565b61089e565b60405161014b91906111aa565b61015d610242366004611084565b610b4d565b61015d61025536600461104d565b60026020525f908152604090205481565b61017361027436600461106d565b610b78565b61015d6102873660046113d2565b610c5a565b335f908152600160209081526040808320805482518185028101850190935280835291929091908301828280156102e057602002820191905f5260205f20905b8154815260200190600101908083116102cc575b505050505090505f8151116103305760405162461bcd60e51b8152602060048201526011602482015270139bc8191bdcdcda595c9cc8199bdd5b99607a1b60448201526064015b60405180910390fd5b5f5b81518110156103d0575f82828151811061034e5761034e6114b7565b602090810291909101810151335f9081528083526040808220838352909352919091206002015490915060ff16156103c757335f8181526020818152604080832085845290915280822042600490910155518392917f2035d3cd8dbfc15af9377f059b052b6056f3915e48e88aa4ccb1524c41a8232c91a35b50600101610332565b5050565b335f818152602081815260408083208584529091529020548290811461040c5760405162461bcd60e51b8152600401610327906114cb565b335f81815260208181526040808320878452909152808220600201805460ff19169055518592917f0941bb85cb5be9df20776a463c826689120d8b7f9acbd0e09e946086391dd0b291a3505050565b335f81815260208181526040808320858452909152902054829081146104935760405162461bcd60e51b8152600401610327906114cb565b5050335f908152602081815260408083209383529290522060028101805460ff1916600117905542600490910155565b6001600160a01b0382165f908152602081815260408083208484529091528120548390839081146105065760405162461bcd60e51b8152600401610327906114cb565b6001600160a01b0385165f908152602081815260408083208784528252808320815160e0810190925280548252600181018054929391929184019161054a906114fb565b80601f0160208091040260200160405190810160405280929190818152602001828054610576906114fb565b80156105c15780601f10610598576101008083540402835291602001916105c1565b820191905f5260205f20905b8154815290600101906020018083116105a457829003601f168201915b50505050508152602001600282015f9054906101000a900460ff16151515158152602001600382015481526020016004820154815260200160058201805480602002602001604051908101604052809291908181526020015f905b828210156106c4578382905f5260205f20018054610639906114fb565b80601f0160208091040260200160405190810160405280929190818152602001828054610665906114fb565b80156106b05780601f10610687576101008083540402835291602001916106b0565b820191905f5260205f20905b81548152906001019060200180831161069357829003601f168201915b50505050508152602001906001019061061c565b5050505081526020016006820180548060200260200160405190810160405280929190818152602001828054801561072357602002820191905f5260205f20905b81546001600160a01b03168152600190910190602001808311610705575b50505050508152505090508060400151610740575f93505061076b565b5f8160800151426107519190611547565b9050610e1082606001516107659190611560565b10159350505b505092915050565b5f6020818152928152604080822090935290815220805460018201805491929161079c906114fb565b80601f01602080910402602001604051908101604052809291908181526020018280546107c8906114fb565b80156108135780601f106107ea57610100808354040283529160200191610813565b820191905f5260205f20905b8154815290600101906020018083116107f657829003601f168201915b5050505060028301546003840154600490940154929360ff9091169290915085565b6001600160a01b0381165f9081526001602090815260409182902080548351818402810184019094528084526060939283018282801561089257602002820191905f5260205f20905b81548152602001906001019080831161087e575b50505050509050919050565b6108dc6040518060e001604052805f8152602001606081526020015f151581526020015f81526020015f815260200160608152602001606081525090565b6001600160a01b0383165f9081526020818152604080832085845290915290205483908390811461091f5760405162461bcd60e51b8152600401610327906114cb565b6001600160a01b0385165f90815260208181526040808320878452825291829020825160e08101909352805483526001810180549192840191610961906114fb565b80601f016020809104026020016040519081016040528092919081815260200182805461098d906114fb565b80156109d85780601f106109af576101008083540402835291602001916109d8565b820191905f5260205f20905b8154815290600101906020018083116109bb57829003601f168201915b50505050508152602001600282015f9054906101000a900460ff16151515158152602001600382015481526020016004820154815260200160058201805480602002602001604051908101604052809291908181526020015f905b82821015610adb578382905f5260205f20018054610a50906114fb565b80601f0160208091040260200160405190810160405280929190818152602001828054610a7c906114fb565b8015610ac75780601f10610a9e57610100808354040283529160200191610ac7565b820191905f5260205f20905b815481529060010190602001808311610aaa57829003601f168201915b505050505081526020019060010190610a33565b50505050815260200160068201805480602002602001604051908101604052809291908181526020018280548015610b3a57602002820191905f5260205f20905b81546001600160a01b03168152600190910190602001808311610b1c575b5050505050815250509250505092915050565b6001602052815f5260405f208181548110610b66575f80fd5b905f5260205f20015f91509150505481565b335f8181526020818152604080832085845290915290205482908114610bb05760405162461bcd60e51b8152600401610327906114cb565b335f9081526020818152604080832086845290915290206002015460ff16610c0f5760405162461bcd60e51b8152602060048201526012602482015271446f7373696572206e6f742061637469766560701b6044820152606401610327565b335f8181526020818152604080832087845290915280822042600490910155518592917f2035d3cd8dbfc15af9377f059b052b6056f3915e48e88aa4ccb1524c41a8232c91a3505050565b5f610e108410158015610c70575062278d008411155b610cbc5760405162461bcd60e51b815260206004820152601960248201527f496e76616c696420636865636b2d696e20696e74657276616c000000000000006044820152606401610327565b335f90815260026020526040902054603211610d115760405162461bcd60e51b815260206004820152601460248201527313585e08191bdcdcda595c9cc81c995858da195960621b6044820152606401610327565b5f8351118015610d2357506014835111155b610d645760405162461bcd60e51b8152602060048201526012602482015271496e76616c696420726563697069656e747360701b6044820152606401610327565b5f8251118015610d7657506064825111155b610db25760405162461bcd60e51b815260206004820152600d60248201526c496e76616c69642066696c657360981b6044820152606401610327565b50335f81815260026020908152604080832054815160e0810183528181528084018a81526001828501819052606083018b905242608084015260a0830189905260c083018a9052968652858552838620838752909452919093208151815591519293909290820190610e2490826115bf565b50604082015160028201805460ff1916911515919091179055606082015160038201556080820151600482015560a08201518051610e6c916005840191602090910190610f15565b5060c08201518051610e88916006840191602090910190610f69565b5050335f81815260016020818152604080842080549384018155845281842090920186905592825260029092529081208054925090610ec68361167f565b919050555080336001600160a01b03167f7de8e13a19a56d242cff40035d4906d78d4c85c327766143a3198955ffce1d8a87604051610f059190611697565b60405180910390a3949350505050565b828054828255905f5260205f20908101928215610f59579160200282015b82811115610f595782518290610f4990826115bf565b5091602001919060010190610f33565b50610f65929150610fc8565b5090565b828054828255905f5260205f20908101928215610fbc579160200282015b82811115610fbc57825182546001600160a01b0319166001600160a01b03909116178255602090920191600190910190610f87565b50610f65929150610fe4565b80821115610f65575f610fdb8282610ff8565b50600101610fc8565b5b80821115610f65575f8155600101610fe5565b508054611004906114fb565b5f825580601f10611013575050565b601f0160209004905f5260205f209081019061102f9190610fe4565b50565b80356001600160a01b0381168114611048575f80fd5b919050565b5f6020828403121561105d575f80fd5b61106682611032565b9392505050565b5f6020828403121561107d575f80fd5b5035919050565b5f8060408385031215611095575f80fd5b61109e83611032565b946020939093013593505050565b5f81518084525f5b818110156110d0576020818501810151868301820152016110b4565b505f602082860101526020601f19601f83011685010191505092915050565b85815260a060208201525f61110760a08301876110ac565b941515604083015250606081019290925260809091015292915050565b602080825282518282018190525f9190848201906040850190845b8181101561115b5783518352928401929184019160010161113f565b50909695505050505050565b5f815180845260208085019450602084015f5b8381101561119f5781516001600160a01b03168752958201959082019060010161117a565b509495945050505050565b5f60208083528351818401528084015160e060408501526111cf6101008501826110ac565b905060408501511515606085015260608501516080850152608085015160a085015260a0850151601f19808684030160c08701528282518085528585019150858160051b86010186850194505f5b8281101561124957848783030184526112378287516110ac565b9588019593880193915060010161121d565b5060c08a01519650838982030160e08a01526112658188611167565b9a9950505050505050505050565b634e487b7160e01b5f52604160045260245ffd5b604051601f8201601f1916810167ffffffffffffffff811182821017156112b0576112b0611273565b604052919050565b5f82601f8301126112c7575f80fd5b813567ffffffffffffffff8111156112e1576112e1611273565b6112f4601f8201601f1916602001611287565b818152846020838601011115611308575f80fd5b816020850160208301375f918101602001919091529392505050565b5f67ffffffffffffffff82111561133d5761133d611273565b5060051b60200190565b5f82601f830112611356575f80fd5b8135602061136b61136683611324565b611287565b82815260059290921b84018101918181019086841115611389575f80fd5b8286015b848110156113c757803567ffffffffffffffff8111156113ab575f80fd5b6113b98986838b01016112b8565b84525091830191830161138d565b509695505050505050565b5f805f80608085870312156113e5575f80fd5b843567ffffffffffffffff808211156113fc575f80fd5b611408888389016112b8565b955060209150818701359450604087013581811115611425575f80fd5b8701601f81018913611435575f80fd5b803561144361136682611324565b81815260059190911b8201840190848101908b831115611461575f80fd5b928501925b828410156114865761147784611032565b82529285019290850190611466565b9650505050606087013591508082111561149e575f80fd5b506114ab87828801611347565b91505092959194509250565b634e487b7160e01b5f52603260045260245ffd5b602080825260169082015275111bdcdcda595c88191bd95cc81b9bdd08195e1a5cdd60521b604082015260600190565b600181811c9082168061150f57607f821691505b60208210810361152d57634e487b7160e01b5f52602260045260245ffd5b50919050565b634e487b7160e01b5f52601160045260245ffd5b8181038181111561155a5761155a611533565b92915050565b8082018082111561155a5761155a611533565b601f8211156115ba57805f5260205f20601f840160051c810160208510156115985750805b601f840160051c820191505b818110156115b7575f81556001016115a4565b50505b505050565b815167ffffffffffffffff8111156115d9576115d9611273565b6115ed816115e784546114fb565b84611573565b602080601f831160018114611620575f84156116095750858301515b5f19600386901b1c1916600185901b178555611677565b5f85815260208120601f198616915b8281101561164e5788860151825594840194600190910190840161162f565b508582101561166b57878501515f19600388901b60f8161c191681555b505060018460011b0185555b505050505050565b5f6001820161169057611690611533565b5060010190565b602081525f61106660208301846110ac56fea2646970667358221220b468d4da9701a6d679678a96e631a8ae5afdd44789e0d5390f6dbb718a638dbe64736f6c63430008180033"},"sourceId":"contracts/Dossier.sol","sourcemap":"224:5515:0:-:0;;;;;;;;;;;;;;;;;;;","userdoc":{"kind":"user","methods":{},"notice":"Create dossiers, check in, and release encrypted data conditionally","version":1}}},"manifest":"ethpm/3","sources":{"contracts/Dossier.sol":{"content":"// SPDX-License-Identifier: MIT\npragma solidity ^0.8.19;\n\n/**\n * @title CanaryDossier\n * @dev Simple dossier-based truth protection platform\n * @notice Create dossiers, check in, and release encrypted data conditionally\n */\ncontract CanaryDossier {\n    \n    // Events\n    event DossierCreated(address indexed user, uint256 indexed dossierId, string name);\n    event CheckInPerformed(address indexed user, uint256 indexed dossierId);\n    event DossierTriggered(address indexed user, uint256 indexed dossierId);\n    \n    // Structs\n    struct Dossier {\n        uint256 id;\n        string name;\n        bool isActive;\n        uint256 checkInInterval; // in seconds\n        uint256 lastCheckIn;\n        string[] encryptedFileHashes; // IPFS hashes for encrypted files\n        address[] recipients; // ETH addresses who can decrypt\n    }\n    \n    // State variables\n    mapping(address => mapping(uint256 => Dossier)) public dossiers;\n    mapping(address => uint256[]) public userDossierIds;\n    mapping(address => uint256) public userDossierCount;\n    \n    // Constants\n    uint256 public constant MIN_CHECK_IN_INTERVAL = 1 hours;\n    uint256 public constant MAX_CHECK_IN_INTERVAL = 30 days;\n    uint256 public constant GRACE_PERIOD = 1 hours;\n    uint256 public constant MAX_DOSSIERS_PER_USER = 50;\n    uint256 public constant MAX_RECIPIENTS_PER_DOSSIER = 20;\n    uint256 public constant MAX_FILES_PER_DOSSIER = 100;\n    \n    // Modifiers\n    modifier validDossier(address _user, uint256 _dossierId) {\n        require(dossiers[_user][_dossierId].id == _dossierId, \"Dossier does not exist\");\n        _;\n    }\n    \n    /**\n     * @dev Create a new dossier\n     */\n    function createDossier(\n        string memory _name,\n        uint256 _checkInInterval,\n        address[] memory _recipients,\n        string[] memory _encryptedFileHashes\n    ) external returns (uint256 dossierId) {\n        require(\n            _checkInInterval >= MIN_CHECK_IN_INTERVAL && \n            _checkInInterval <= MAX_CHECK_IN_INTERVAL,\n            \"Invalid check-in interval\"\n        );\n        require(userDossierCount[msg.sender] < MAX_DOSSIERS_PER_USER, \"Max dossiers reached\");\n        require(_recipients.length > 0 && _recipients.length <= MAX_RECIPIENTS_PER_DOSSIER, \"Invalid recipients\");\n        require(_encryptedFileHashes.length > 0 && _encryptedFileHashes.length <= MAX_FILES_PER_DOSSIER, \"Invalid files\");\n        \n        dossierId = userDossierCount[msg.sender];\n        \n        dossiers[msg.sender][dossierId] = Dossier({\n            id: dossierId,\n            name: _name,\n            isActive: true,\n            checkInInterval: _checkInInterval,\n            lastCheckIn: block.timestamp,\n            encryptedFileHashes: _encryptedFileHashes,\n            recipients: _recipients\n        });\n        \n        userDossierIds[msg.sender].push(dossierId);\n        userDossierCount[msg.sender]++;\n        \n        emit DossierCreated(msg.sender, dossierId, _name);\n    }\n    \n    /**\n     * @dev Check-in for a specific dossier\n     */\n    function checkIn(uint256 _dossierId) external validDossier(msg.sender, _dossierId) {\n        require(dossiers[msg.sender][_dossierId].isActive, \"Dossier not active\");\n        \n        dossiers[msg.sender][_dossierId].lastCheckIn = block.timestamp;\n        emit CheckInPerformed(msg.sender, _dossierId);\n    }\n    \n    /**\n     * @dev Check-in for all active dossiers\n     */\n    function checkInAll() external {\n        uint256[] memory userDossiers = userDossierIds[msg.sender];\n        require(userDossiers.length > 0, \"No dossiers found\");\n        \n        for (uint256 i = 0; i < userDossiers.length; i++) {\n            uint256 dossierId = userDossiers[i];\n            if (dossiers[msg.sender][dossierId].isActive) {\n                dossiers[msg.sender][dossierId].lastCheckIn = block.timestamp;\n                emit CheckInPerformed(msg.sender, dossierId);\n            }\n        }\n    }\n    \n    /**\n     * @dev Check if dossier should stay encrypted (for TACo integration)\n     */\n    function shouldDossierStayEncrypted(address _user, uint256 _dossierId) \n        external \n        view \n        validDossier(_user, _dossierId)\n        returns (bool) \n    {\n        Dossier memory dossier = dossiers[_user][_dossierId];\n        \n        if (!dossier.isActive) {\n            return false;\n        }\n        \n        uint256 timeSinceLastCheckIn = block.timestamp - dossier.lastCheckIn;\n        return timeSinceLastCheckIn <= (dossier.checkInInterval + GRACE_PERIOD);\n    }\n    \n    /**\n     * @dev Deactivate a dossier (releases data)\n     */\n    function deactivateDossier(uint256 _dossierId) external validDossier(msg.sender, _dossierId) {\n        dossiers[msg.sender][_dossierId].isActive = false;\n        emit DossierTriggered(msg.sender, _dossierId);\n    }\n    \n    /**\n     * @dev Reactivate a dossier\n     */\n    function reactivateDossier(uint256 _dossierId) external validDossier(msg.sender, _dossierId) {\n        dossiers[msg.sender][_dossierId].isActive = true;\n        dossiers[msg.sender][_dossierId].lastCheckIn = block.timestamp;\n    }\n    \n    /**\n     * @dev Get dossier details\n     */\n    function getDossier(address _user, uint256 _dossierId) \n        external \n        view \n        validDossier(_user, _dossierId)\n        returns (Dossier memory) \n    {\n        return dossiers[_user][_dossierId];\n    }\n    \n    /**\n     * @dev Get user's dossier IDs\n     */\n    function getUserDossierIds(address _user) external view returns (uint256[] memory) {\n        return userDossierIds[_user];\n    }\n    \n    /**\n     * @dev Check if user has any dossiers\n     */\n    function userExists(address _user) external view returns (bool) {\n        return userDossierIds[_user].length > 0;\n    }\n}\n","urls":[]}}}